# Expense Tracker

A web application for tracking personal expenses by category.

## Overview

Users log expenses (amount, description, date, category). Admins manage categories.
Built as a practical AI-assisted development exercise  90%+ of code generated by GitHub Copilot.

## Tech Stack

| Layer    | Technology                            |
|----------|---------------------------------------|
| Backend  | .NET 8 Web API, EF Core 8, SQLite     |
| Frontend | React 18, Vite, TypeScript            |
| Auth     | JWT Bearer, BCrypt                    |
| Routing  | React Router DOM v6                   |
| HTTP     | SWR + Axios                           |
| Styling  | Tailwind CSS 3, PostCSS, CSS Modules  |
| Forms    | React Hook Form + Yup                 |
| Utilities | lodash, date-fns, classnames         |
| Linting  | ESLint 9 + Prettier + husky + lint-staged |

## Running the App

**Backend** (port 5001):
```bash
cd server/ExpenseTracker.Api
dotnet run
```

**Frontend** (port 5173):
```bash
cd client/expense-tracker-ui
npm install
npm run dev
```

Swagger UI: http://localhost:5001/swagger

---

## AI Tools Used

| Tool | Purpose |
|------|---------|
| GitHub Copilot (Agent mode, Claude Sonnet 4.6) | All code generation, architecture, prompt files |
| `.github/copilot-instructions.md` | Shared project context auto-loaded by Copilot |
| `.github/prompts/backend-dev.prompt.md` | Backend agent instructions (load with `#backend-dev`) |
| `.github/prompts/ui-dev.prompt.md` | UI agent instructions (load with `#ui-dev`) |
| `.github/prompts/product-owner.prompt.md` | Product owner role  task tracking, prompt authoring |

## Agent Workflow

Three-agent model in a single Copilot Chat session:
- **Product Owner** (`#product-owner`)  decomposes tasks, writes prompts, updates docs
- **Backend Developer** (`#backend-dev`)  implements .NET files one by one
- **UI Developer** (`#ui-dev`)  implements React components one by one

---

## Prompt History

### Step 1  Project scaffold & NuGet packages
**Agent:** Product Owner (GitHub Copilot)
**Prompt:**
> Describe the backend skeleton structure needed for Expense Tracker: folders, stub files, packages to install. Do not generate code yet  only the plan.

**Result:** Full plan with file structure, NuGet package list, port configuration.
**Accepted/Changed:** Accepted as-is. Served as the execution plan for the next step.

---

### Step 2  Backend skeleton creation
**Agent:** Product Owner (GitHub Copilot)
**Prompt:**
> Execute the skeleton plan: install NuGet packages, create stub files (namespace + class only), update port to 5001.

**Result:** 4 NuGet packages installed (EF Core SQLite, EF Core Design, JwtBearer, BCrypt), 7 stub files created across Models/, Data/, Controllers/, port updated in launchSettings.json. Build succeeded.
**Accepted/Changed:** NuGet version conflict resolved  manually specified `--version 8.0.*` because NuGet defaulted to .NET 10 versions incompatible with net8.0 target.

---

### Step 3  Instruction files for agents
**Agent:** Product Owner (GitHub Copilot)
**Prompt:**
> Create three instruction files for the three-agent workflow: shared copilot-instructions.md (always active), backend-dev.prompt.md, ui-dev.prompt.md, product-owner.prompt.md. The product owner file must include current project status, prompt authoring format, and README logging format.

**Result:** 4 files created. `copilot-instructions.md` contains shared models + API contract. Each `.prompt.md` contains role-specific tech details, file status table, and implementation specs.
**Accepted/Changed:** Accepted as-is.

---

### Step 4 — Frontend skeleton
**Agent:** UI Developer
**Prompt:**
> Scaffold Vite + React + TS, install react-router-dom + axios, create stub files for all layouts/pages/components, wire full routing in App.tsx.

**Result:** Project scaffolded, 13 stub files created, routing wired, `npm run dev` starts on port 5173.
**Accepted/Changed:** Accepted as-is.

---

### Step 10 — Auth flow (UI)
**Agent:** UI Developer
**Prompt:**
> Implement the full authentication flow: ProtectedRoute, AdminRoute, LoginPage, RegisterPage, AuthLayout.

**Result:** Login/register forms with API calls, token persistence, redirects, error handling. Route guards redirect unauthenticated users to `/login` and non-admins away from admin area.
**Accepted/Changed:** Accepted as-is.

---

### Step 11 — Expenses UI
**Agent:** UI Developer
**Prompt:**
> Implement DashboardPage (expense list, total, category filter, delete, links to add/edit) and ExpenseFormPage (add/edit form with amount, description, date, category select).

**Result:** Dashboard with full expense table, color-coded category badges, total sum, filter, delete confirmation. ExpenseFormPage detects add vs edit mode from URL param.
**Accepted/Changed:** Accepted as-is.

---

### Step 12 — Navigation + Admin UI
**Agent:** UI Developer
**Prompt:**
> Implement MainLayout (navbar + logout + Admin link for admins), AdminLayout (sidebar), CategoriesPage (table + delete + nav), CategoryFormPage (add/edit with color picker).

**Result:** Full navigation with role-based Admin link, logout, admin category management with color swatches and color picker.
**Accepted/Changed:** Accepted as-is.

---

### Step 13 — Frontend tech stack migration
**Agent:** UI Developer
**Prompt:**
> Rewrite the entire frontend to use: Tailwind CSS 3 + PostCSS + CSS Modules for styling, React Hook Form + Yup + @hookform/resolvers for forms, SWR + Axios for data fetching, lodash/date-fns/classnames/query-string/b64-to-blob as utilities, ESLint 9 + Prettier + husky + lint-staged for linting. Downgrade from React 19 to React 18. Update all documentation.

**Result:** Complete migration of all frontend files. Added: AuthContext (replaces raw localStorage reads), SWR hooks (replace useState+useEffect fetching), validation schemas with Yup, CSS Modules for all components (replace inline styles), Tailwind CSS for utility classes, path alias `@/`. Updated package.json, vite.config, tsconfig, eslint config. Created new files: tailwind.config.js, postcss.config.js, .prettierrc, src/types/index.ts, src/utils/helpers.ts, src/validation/schemas.ts, src/hooks/useData.ts, src/context/AuthContext.tsx, src/api/fetcher.ts, src/vite-env.d.ts, src/index.css, and 7 CSS Module files. Updated all 3 documentation files.
**Accepted/Changed:** Accepted as-is.

---

## Insights

> *To be filled after project completion*

- Which prompts worked well?
- Which prompts did not work, and why?
- What patterns gave the best results?
